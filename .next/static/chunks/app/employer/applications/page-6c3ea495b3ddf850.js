(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8540],{7028:(e,t,s)=>{Promise.resolve().then(s.bind(s,2388))},2388:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var i=s(5155),a=s(2115),n=s(2110);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)(!0),[l,r]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{try{var e;let s=await fetch("/api/auth/session").then(e=>e.json());if(!(null==s?void 0:null===(e=s.user)||void 0===e?void 0:e.id))throw Error("User not authenticated");let i=await fetch("/api/employer/applications",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s.user.id})});if(!i.ok)throw Error("Failed to fetch applications");let a=await i.json();t(a.applications),o(!1)}catch(e){r(e.message),o(!1)}})()},[]);let d=async(s,i)=>{try{let a=await fetch("/api/employer/applications/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({applicationId:s,status:i})});if(console.log(a),a.ok)t(e),n.oR.success("Application status updated successfully");else throw Error("Failed to update application status");t(e=>e.map(e=>e._id===s?{...e,status:i}:e))}catch(e){console.error("Error updating application status:",e.message)}};return s?(0,i.jsx)("div",{children:"Loading..."}):l?(0,i.jsxs)("div",{children:["Error: ",l]}):(0,i.jsxs)("div",{className:"p-4",children:[(0,i.jsx)(n.N9,{}),(0,i.jsx)("h1",{className:"text-xl font-bold mb-4",children:"Applications"}),0===e.length?(0,i.jsx)("p",{children:"No applications found."}):(0,i.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map(e=>{var t,s,a,n;return console.log(e),(0,i.jsxs)("div",{className:"border p-4 rounded shadow-sm",children:[(0,i.jsx)("h2",{className:"font-bold text-lg",children:(null===(t=e.job)||void 0===t?void 0:t.title)||"No Title"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Location: ",(null===(s=e.job)||void 0===s?void 0:s.location)||"N/A"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Applicant:"})," ",(null===(a=e.user)||void 0===a?void 0:a.name)||"Unknown"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Email:"})," ",(null===(n=e.user)||void 0===n?void 0:n.email)||"Unknown"]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Status:"})," ",e.status||"Pending"]}),(0,i.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,i.jsx)("button",{className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600",onClick:()=>d(e.applicationId,"Accepted"),children:"Accept"}),(0,i.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",onClick:()=>d(e.applicationId,"Rejected"),children:"Reject"})]})]},e._id)})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2110,8441,1517,7358],()=>t(7028)),_N_E=e.O()}]);