(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1897],{7229:(e,t,a)=>{Promise.resolve().then(a.bind(a,9405))},9405:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var l=a(5155),r=a(2115);let s=()=>{var e,t,a;let[s,o]=(0,r.useState)(null),[n,i]=(0,r.useState)(!0),[d,u]=(0,r.useState)(""),[c,p]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{try{var e;let t=await fetch("/api/auth/session").then(e=>e.json()),a=await fetch("/api/user/getuser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id})});if(!a.ok)throw Error("Failed to fetch profile");let l=await a.json();o(l.user),p(l.user),i(!1)}catch(e){u(e.message),i(!1)}})()},[]);let x=async e=>{e.preventDefault();try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!e.ok)throw Error("Failed to update profile");let t=await e.json();o(t),alert("Profile updated successfully!")}catch(e){u(e.message)}};return n?(0,l.jsx)("div",{className:"text-center text-gray-500 mt-10",children:"Loading..."}):(0,l.jsxs)("div",{className:"max-w-4xl mx-auto bg-white shadow-md rounded-lg p-6 mt-10",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Profile"}),(0,l.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name:"}),(0,l.jsx)("input",{type:"text",value:c.name||"",onChange:e=>p({...c,name:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email:"}),(0,l.jsx)("input",{type:"email",value:c.email||"",disabled:!0,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-500 cursor-not-allowed"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact:"}),(0,l.jsx)("input",{type:"text",value:c.contact||"",onChange:e=>p({...c,contact:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Location:"}),(0,l.jsx)("input",{type:"text",value:c.location||"",onChange:e=>p({...c,location:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Skills:"}),null===(e=c.skills)||void 0===e?void 0:e.map((e,t)=>(0,l.jsxs)("div",{className:" space-x-2 items-center mb-2",children:[(0,l.jsx)("input",{type:"text",value:e,onChange:e=>p({...c,skills:c.skills.map((a,l)=>l===t?e.target.value:a)}),className:" border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("button",{type:"button",onClick:()=>p({...c,skills:c.skills.filter((e,a)=>a!==t)}),className:"text-red-500 hover:text-red-700",children:"X"})]},t)),(0,l.jsx)("button",{type:"button",onClick:()=>p({...c,skills:[...c.skills||[],""]}),className:"text-blue-500 hover:text-blue-700 text-sm",children:"Add Skill"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Education:"}),null===(t=c.education)||void 0===t?void 0:t.map((e,t)=>(0,l.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Institution",value:e.institution||"",onChange:e=>p({...c,education:c.education.map((a,l)=>l===t?{...a,institution:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"text",placeholder:"Degree",value:e.degree||"",onChange:e=>p({...c,education:c.education.map((a,l)=>l===t?{...a,degree:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"text",placeholder:"Field of Study",value:e.fieldOfStudy||"",onChange:e=>p({...c,education:c.education.map((a,l)=>l===t?{...a,fieldOfStudy:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"number",placeholder:"Year",value:e.year||"",onChange:e=>p({...c,education:c.education.map((a,l)=>l===t?{...a,year:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("button",{type:"button",onClick:()=>p({...c,education:c.education.filter((e,a)=>a!==t)}),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove Education"})]},t)),(0,l.jsx)("button",{type:"button",onClick:()=>p({...c,education:[...c.education||[],{institution:"",degree:"",fieldOfStudy:"",year:""}]}),className:"text-blue-500 hover:text-blue-700 text-sm",children:"Add Education"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Work Experience:"}),null===(a=c.workExperience)||void 0===a?void 0:a.map((e,t)=>(0,l.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Company",value:e.company||"",onChange:e=>p({...c,workExperience:c.workExperience.map((a,l)=>l===t?{...a,company:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("input",{type:"text",placeholder:"Position",value:e.position||"",onChange:e=>p({...c,workExperience:c.workExperience.map((a,l)=>l===t?{...a,position:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date:"}),(0,l.jsx)("input",{type:"date",value:e.startDate||"",onChange:e=>p({...c,workExperience:c.workExperience.map((a,l)=>l===t?{...a,startDate:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"End Date:"}),(0,l.jsx)("input",{type:"date",value:e.endDate||"",onChange:e=>p({...c,workExperience:c.workExperience.map((a,l)=>l===t?{...a,endDate:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"}),(0,l.jsx)("textarea",{placeholder:"Description",value:e.description||"",onChange:e=>p({...c,workExperience:c.workExperience.map((a,l)=>l===t?{...a,description:e.target.value}:a)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]},t)),(0,l.jsx)("button",{type:"button",onClick:()=>p({...c,workExperience:[...c.workExperience||[],{company:"",position:"",startDate:"",endDate:"",description:""}]}),className:"text-blue-500 hover:text-blue-700 text-sm",children:"Add Work Experience"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Certifications:"}),(0,l.jsx)("textarea",{value:c.certifications?c.certifications.join(", "):"",onChange:e=>p({...c,certifications:e.target.value.split(",").map(e=>e.trim())}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Portfolio Links:"}),["github","linkedin","website"].map(e=>{var t;return(0,l.jsxs)("div",{children:[(0,l.jsxs)("label",{className:"block text-sm font-medium text-gray-700 capitalize",children:[e,":"]}),(0,l.jsx)("input",{type:"url",value:(null===(t=c.portfolioLinks)||void 0===t?void 0:t[e])||"",onChange:t=>p({...c,portfolioLinks:{...c.portfolioLinks,[e]:t.target.value}}),className:"w-full border border-gray-300 rounded-lg px-3 py-2"})]},e)})]}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Update Profile"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1517,7358],()=>t(7229)),_N_E=e.O()}]);